<!-- begin _includes/seo.html -->
{%- if site.url -%}
  {%- assign seo_url = site.url | append: site.baseurl -%}
{%- endif -%}
{%- assign seo_url = seo_url | default: site.github.url -%}

{% assign title_separator = site.title_separator | default: '-' | replace: '|', '&#124;' %}

{%- if page.title -%}
  {%- assign seo_title = page.title | append: " " | append: title_separator | append: " " | append: site.title -%}
{%- endif -%}

{%- if seo_title -%}
  {%- assign seo_title = seo_title | markdownify | strip_html | strip_newlines | escape_once -%}
{%- endif -%}

{%- assign seo_description = page.description | default: page.excerpt | default: site.description -%}
{%- if seo_description -%}
  {%- assign seo_description = seo_description | markdownify | strip_html | newline_to_br | strip_newlines | replace: '<br />', ' ' | escape_once -%}
{%- endif -%}

{%- assign author = page.author | default: site.author -%}

{%- if page.layout == 'post' -%}
  {%- assign og_type = "article" -%}
{%- else -%}
  {%- assign og_type = "website" -%}
{%- endif -%}

<title>{{ seo_title | default: site.title }}{% if paginator %}{% unless paginator.page == 1 %} {{ title_separator }} {{ "Page" }} {{ paginator.page }}{% endunless %}{% endif %}</title>
<meta name="description" content="{{ seo_description }}">
<meta name="keywords" content="{{ site.keyword }}" />

<meta name="author" content="{{ author }}">

{% for tag in page.tags %}
  <meta property="article:tag" content="{{ tag }}" />
{% endfor %} 

<meta property="og:type" content="{{ og_type }}">
<meta property="og:site_name" content="{{ site.title }}">
<meta property="og:title" content="{{ page.title | default: site.title | markdownify | strip_html | strip_newlines | escape_once }}">
<meta property="og:url" content="{{ site.url }}{{ page.url }}" />

{% if seo_description %}
  <meta property="og:description" content="{{ seo_description }}">
{% endif %}

<meta
property="og:image"
content="{{ site.url }}{{ site.sidebar-avatar }}"
/>

{% if page.date %}
  <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
{% endif %}

{% if og_type == "article" and page.last_modified_at %}
  <meta property="article:modified_time" content="{{ page.last_modified_at | date_to_xmlschema }}">
{% endif %}

<!-- Canonical URL -->
<link
rel="canonical"
href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}"
/>
{% if paginator.previous_page %}
  <link rel="prev" href="{{ paginator.previous_page_path | absolute_url }}">
{% endif %}
{% if paginator.next_page %}
  <link rel="next" href="{{ paginator.next_page_path | absolute_url }}">
{% endif %}

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
      "@type": "Person",
      "name": {{ site.author | jsonify }},
      "url": {{ '/' | absolute_url |jsonify }}
  }
</script>

{% if site.google_site_verification %}
  <meta name="google-site-verification" content="{{ site.google_site_verification }}" />
{% endif %}
{% if site.bing_site_verification %}
  <meta name="msvalidate.01" content="{{ site.bing_site_verification }}">
{% endif %}
{% if site.naver_site_verification %}
  <meta name="naver-site-verification" content="{{ site.naver_site_verification }}">
{% endif %}
<!-- end _includes/seo.html -->
